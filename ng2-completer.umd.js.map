{"version":3,"file":"ng2-completer.umd.js","sources":["globals.js","services/completer-data-factory.js","directives/ctr-completer.js","services/completer-base-data.js","services/local-data.js","services/remote-data.js","services/completer-service.js","components/completer-cmp.js","components/completer-list-item-cmp.js","directives/ctr-dropdown.js","directives/ctr-input.js","directives/ctr-list.js","directives/ctr-row.js","ng2-completer.module.js"],"sourcesContent":["export var MAX_CHARS = 524288; // the default max length per the html maxlength attribute\n// the default max length per the html maxlength attribute\nexport var MIN_SEARCH_LENGTH = 3;\nexport var PAUSE = 10;\nexport var TEXT_SEARCHING = \"Searching...\";\nexport var TEXT_NO_RESULTS = \"No results found\";\nexport var CLEAR_TIMEOUT = 50;\nexport function isNil(value) {\n    return typeof value === \"undefined\" || value === null;\n}\n//# sourceMappingURL=globals.js.map","import { Http } from \"@angular/http\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nexport function localDataFactory() {\n    return function () {\n        return new LocalData();\n    };\n}\nexport function remoteDataFactory(http) {\n    return function () {\n        return new RemoteData(http);\n    };\n}\nexport var LocalDataFactoryProvider = { provide: LocalData, useFactory: localDataFactory };\nexport var RemoteDataFactoryProvider = { provide: RemoteData, useFactory: remoteDataFactory, deps: [Http] };\n//# sourceMappingURL=completer-data-factory.js.map","import { Directive, EventEmitter, Output } from \"@angular/core\";\nvar CtrCompleter = (function () {\n    function CtrCompleter() {\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.opened = new EventEmitter();\n        this._hasHighlighted = false;\n        this._hasSelected = false;\n        this._cancelBlur = false;\n        this._isOpen = false;\n    }\n    CtrCompleter.prototype.registerList = function (list) {\n        this.list = list;\n    };\n    CtrCompleter.prototype.registerDropdown = function (dropdown) {\n        this.dropdown = dropdown;\n    };\n    CtrCompleter.prototype.onHighlighted = function (item) {\n        this.highlighted.emit(item);\n        this._hasHighlighted = !!item;\n    };\n    CtrCompleter.prototype.onSelected = function (item, clearList) {\n        if (clearList === void 0) { clearList = true; }\n        this.selected.emit(item);\n        if (item) {\n            this._hasSelected = true;\n        }\n        if (clearList) {\n            this.clear();\n        }\n    };\n    CtrCompleter.prototype.search = function (term) {\n        if (this._hasSelected) {\n            this.selected.emit(null);\n            this._hasSelected = false;\n        }\n        if (this.list) {\n            this.list.search(term);\n        }\n    };\n    CtrCompleter.prototype.clear = function () {\n        this._hasHighlighted = false;\n        this.isOpen = false;\n        if (this.dropdown) {\n            this.dropdown.clear();\n        }\n        if (this.list) {\n            this.list.clear();\n        }\n    };\n    CtrCompleter.prototype.selectCurrent = function () {\n        if (this.dropdown) {\n            this.dropdown.selectCurrent();\n        }\n    };\n    CtrCompleter.prototype.nextRow = function () {\n        if (this.dropdown) {\n            this.dropdown.nextRow();\n        }\n    };\n    CtrCompleter.prototype.prevRow = function () {\n        if (this.dropdown) {\n            this.dropdown.prevRow();\n        }\n    };\n    CtrCompleter.prototype.hasHighlighted = function () {\n        return this._hasHighlighted;\n    };\n    CtrCompleter.prototype.cancelBlur = function (cancel) {\n        this._cancelBlur = cancel;\n    };\n    CtrCompleter.prototype.isCancelBlur = function () {\n        return this._cancelBlur;\n    };\n    CtrCompleter.prototype.open = function () {\n        if (!this._isOpen) {\n            this.isOpen = true;\n            this.list.open();\n        }\n    };\n    Object.defineProperty(CtrCompleter.prototype, \"isOpen\", {\n        get: function () {\n            return this._isOpen;\n        },\n        set: function (open) {\n            this._isOpen = open;\n            this.opened.emit(this._isOpen);\n            if (this.list) {\n                this.list.isOpen(open);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrCompleter.prototype, \"autoHighlightIndex\", {\n        get: function () {\n            return this._autoHighlightIndex;\n        },\n        set: function (index) {\n            this._autoHighlightIndex = index;\n            if (this.dropdown) {\n                this.dropdown.highlightRow(this._autoHighlightIndex);\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrCompleter.prototype, \"hasSelected\", {\n        get: function () {\n            return this._hasSelected;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CtrCompleter;\n}());\nexport { CtrCompleter };\nCtrCompleter.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrCompleter]\",\n            },] },\n];\n/** @nocollapse */\nCtrCompleter.ctorParameters = function () { return []; };\nCtrCompleter.propDecorators = {\n    'selected': [{ type: Output },],\n    'highlighted': [{ type: Output },],\n    'opened': [{ type: Output },],\n};\n//# sourceMappingURL=ctr-completer.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Subject } from \"rxjs/Subject\";\nimport { isNil } from \"../globals\";\nvar CompleterBaseData = (function (_super) {\n    __extends(CompleterBaseData, _super);\n    function CompleterBaseData() {\n        return _super.call(this) || this;\n    }\n    CompleterBaseData.prototype.cancel = function () { };\n    CompleterBaseData.prototype.searchFields = function (searchFields) {\n        this._searchFields = searchFields;\n        return this;\n    };\n    CompleterBaseData.prototype.titleField = function (titleField) {\n        this._titleField = titleField;\n        return this;\n    };\n    CompleterBaseData.prototype.descriptionField = function (descriptionField) {\n        this._descriptionField = descriptionField;\n        return this;\n    };\n    CompleterBaseData.prototype.imageField = function (imageField) {\n        this._imageField = imageField;\n        return this;\n    };\n    CompleterBaseData.prototype.convertToItem = function (data) {\n        var image = null;\n        var formattedText;\n        var formattedDesc = null;\n        if (this._titleField) {\n            formattedText = this.extractTitle(data);\n        }\n        else {\n            formattedText = data;\n        }\n        if (this._descriptionField) {\n            formattedDesc = this.extractValue(data, this._descriptionField);\n        }\n        if (this._imageField) {\n            image = this.extractValue(data, this._imageField);\n        }\n        if (isNil(formattedText)) {\n            return null;\n        }\n        return {\n            title: formattedText,\n            description: formattedDesc,\n            image: image,\n            originalObject: data\n        };\n    };\n    CompleterBaseData.prototype.extractMatches = function (data, term) {\n        var _this = this;\n        var matches = [];\n        var searchFields = this._searchFields ? this._searchFields.split(\",\") : null;\n        if (this._searchFields !== null && this._searchFields !== undefined && term != \"\") {\n            matches = data.filter(function (item) {\n                var values = searchFields ? searchFields.map(function (searchField) { return _this.extractValue(item, searchField); }).filter(function (value) { return !!value; }) : [item];\n                return values.some(function (value) { return value.toString().toLowerCase().indexOf(term.toString().toLowerCase()) >= 0; });\n            });\n        }\n        else {\n            matches = data;\n        }\n        return matches;\n    };\n    CompleterBaseData.prototype.extractTitle = function (item) {\n        var _this = this;\n        // split title fields and run extractValue for each and join with ' '\n        return this._titleField.split(\",\")\n            .map(function (field) {\n            return _this.extractValue(item, field);\n        })\n            .reduce(function (acc, titlePart) { return acc ? acc + \" \" + titlePart : titlePart; });\n    };\n    CompleterBaseData.prototype.extractValue = function (obj, key) {\n        var keys;\n        var result;\n        if (key) {\n            keys = key.split(\".\");\n            result = obj;\n            for (var i = 0; i < keys.length; i++) {\n                if (result) {\n                    result = result[keys[i]];\n                }\n            }\n        }\n        else {\n            result = obj;\n        }\n        return result;\n    };\n    CompleterBaseData.prototype.processResults = function (matches) {\n        var i;\n        var results = [];\n        if (matches && matches.length > 0) {\n            for (i = 0; i < matches.length; i++) {\n                var item = this.convertToItem(matches[i]);\n                if (item) {\n                    results.push(item);\n                }\n            }\n        }\n        return results;\n    };\n    return CompleterBaseData;\n}(Subject));\nexport { CompleterBaseData };\n//# sourceMappingURL=completer-base-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Injectable } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar LocalData = (function (_super) {\n    __extends(LocalData, _super);\n    function LocalData() {\n        return _super.call(this) || this;\n    }\n    LocalData.prototype.data = function (data) {\n        var _this = this;\n        if (data instanceof Observable) {\n            data.subscribe(function (res) {\n                _this._data = res;\n                if (_this.savedTerm) {\n                    _this.search(_this.savedTerm);\n                }\n            });\n        }\n        else {\n            this._data = data;\n        }\n        return this;\n    };\n    LocalData.prototype.search = function (term) {\n        if (!this._data) {\n            this.savedTerm = term;\n        }\n        else {\n            this.savedTerm = null;\n            var matches = this.extractMatches(this._data, term);\n            this.next(this.processResults(matches));\n        }\n    };\n    LocalData.prototype.convertToItem = function (data) {\n        return _super.prototype.convertToItem.call(this, data);\n    };\n    return LocalData;\n}(CompleterBaseData));\nexport { LocalData };\nLocalData.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nLocalData.ctorParameters = function () { return []; };\n//# sourceMappingURL=local-data.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Headers, RequestOptions } from \"@angular/http\";\nimport { Observable } from \"rxjs/Observable\";\nimport \"rxjs/add/operator/map\";\nimport \"rxjs/add/operator/catch\";\nimport \"rxjs/add/observable/of\";\nimport { CompleterBaseData } from \"./completer-base-data\";\nvar RemoteData = (function (_super) {\n    __extends(RemoteData, _super);\n    function RemoteData(http) {\n        var _this = _super.call(this) || this;\n        _this.http = http;\n        _this._urlFormater = null;\n        _this._dataField = null;\n        return _this;\n    }\n    RemoteData.prototype.remoteUrl = function (remoteUrl) {\n        this._remoteUrl = remoteUrl;\n        return this;\n    };\n    RemoteData.prototype.urlFormater = function (urlFormater) {\n        this._urlFormater = urlFormater;\n    };\n    RemoteData.prototype.dataField = function (dataField) {\n        this._dataField = dataField;\n    };\n    /**\n     * @deprecated Please use the requestOptions to pass headers with the search request\n     */\n    RemoteData.prototype.headers = function (headers) {\n        this._headers = headers;\n    };\n    RemoteData.prototype.requestOptions = function (requestOptions) {\n        this._requestOptions = requestOptions;\n    };\n    RemoteData.prototype.search = function (term) {\n        var _this = this;\n        this.cancel();\n        // let params = {};\n        var url = \"\";\n        if (this._urlFormater) {\n            url = this._urlFormater(term);\n        }\n        else {\n            url = this._remoteUrl + encodeURIComponent(term);\n        }\n        /*\n         * If requestOptions are provided, they will override anything set in headers.\n         *\n         * If no requestOptions are provided, a new RequestOptions object will be instantiated,\n         * and either the provided headers or a new Headers() object will be sent.\n         */\n        if (!this._requestOptions) {\n            this._requestOptions = new RequestOptions();\n            this._requestOptions.headers = this._headers || new Headers();\n        }\n        this.remoteSearch = this.http.get(url, this._requestOptions.merge())\n            .map(function (res) { return res.json(); })\n            .map(function (data) {\n            var matches = _this.extractValue(data, _this._dataField);\n            return _this.extractMatches(matches, term);\n        })\n            .map(function (matches) {\n            var results = _this.processResults(matches);\n            _this.next(results);\n            return results;\n        })\n            .catch(function (err) {\n            _this.error(err);\n            return Observable.of(null);\n        })\n            .subscribe();\n    };\n    RemoteData.prototype.cancel = function () {\n        if (this.remoteSearch) {\n            this.remoteSearch.unsubscribe();\n        }\n    };\n    RemoteData.prototype.convertToItem = function (data) {\n        return _super.prototype.convertToItem.call(this, data);\n    };\n    return RemoteData;\n}(CompleterBaseData));\nexport { RemoteData };\n//# sourceMappingURL=remote-data.js.map","import { Injectable, Inject } from \"@angular/core\";\nimport { LocalData } from \"./local-data\";\nimport { RemoteData } from \"./remote-data\";\nvar CompleterService = (function () {\n    function CompleterService(localDataFactory, // Using any instead of () => LocalData because on AoT errors\n        remoteDataFactory // Using any instead of () => LocalData because on AoT errors\n    ) {\n        this.localDataFactory = localDataFactory;\n        this.remoteDataFactory = remoteDataFactory; // Using any instead of () => LocalData because on AoT errors\n    }\n    CompleterService.prototype.local = function (data, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var localData = this.localDataFactory();\n        return localData\n            .data(data)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    CompleterService.prototype.remote = function (url, searchFields, titleField) {\n        if (searchFields === void 0) { searchFields = \"\"; }\n        if (titleField === void 0) { titleField = \"\"; }\n        var remoteData = this.remoteDataFactory();\n        return remoteData\n            .remoteUrl(url)\n            .searchFields(searchFields)\n            .titleField(titleField);\n    };\n    return CompleterService;\n}());\nexport { CompleterService };\nCompleterService.decorators = [\n    { type: Injectable },\n];\n/** @nocollapse */\nCompleterService.ctorParameters = function () { return [\n    { type: undefined, decorators: [{ type: Inject, args: [LocalData,] },] },\n    { type: undefined, decorators: [{ type: Inject, args: [RemoteData,] },] },\n]; };\n//# sourceMappingURL=completer-service.js.map","\"use strict\";\nimport { ChangeDetectorRef, Component, Input, Output, EventEmitter, ViewChild, forwardRef } from \"@angular/core\";\nimport { FormControl, NG_VALUE_ACCESSOR } from \"@angular/forms\";\nimport { CtrCompleter } from \"../directives/ctr-completer\";\nimport { CompleterService } from \"../services/completer-service\";\nimport { MAX_CHARS, MIN_SEARCH_LENGTH, PAUSE, TEXT_SEARCHING, TEXT_NO_RESULTS } from \"../globals\";\nimport \"rxjs/add/operator/catch\";\nvar noop = function () { };\nvar COMPLETER_CONTROL_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(function () { return CompleterCmp; }),\n    multi: true\n};\nvar CompleterCmp = (function () {\n    function CompleterCmp(completerService, cdr) {\n        this.completerService = completerService;\n        this.cdr = cdr;\n        this.inputName = \"\";\n        this.inputId = \"\";\n        this.pause = PAUSE;\n        this.minSearchLength = MIN_SEARCH_LENGTH;\n        this.maxChars = MAX_CHARS;\n        this.overrideSuggested = false;\n        this.clearSelected = false;\n        this.clearUnselected = false;\n        this.fillHighlighted = true;\n        this.placeholder = \"\";\n        this.autoMatch = false;\n        this.disableInput = false;\n        this.autofocus = false;\n        this.openOnFocus = false;\n        this.autoHighlight = false;\n        this.tokenSeparator = '';\n        this.selected = new EventEmitter();\n        this.highlighted = new EventEmitter();\n        this.blur = new EventEmitter();\n        this.focusEvent = new EventEmitter();\n        this.opened = new EventEmitter();\n        this.keyup = new EventEmitter();\n        this.keydown = new EventEmitter();\n        this.searchStr = \"\";\n        this.control = new FormControl(\"\");\n        this.displaySearching = true;\n        this.displayNoResults = true;\n        this._onTouchedCallback = noop;\n        this._onChangeCallback = noop;\n        this._focus = false;\n        this._open = false;\n        this._textNoResults = TEXT_NO_RESULTS;\n        this._textSearching = TEXT_SEARCHING;\n    }\n    Object.defineProperty(CompleterCmp.prototype, \"value\", {\n        get: function () { return this.searchStr; },\n        set: function (v) {\n            if (v !== this.searchStr) {\n                this.searchStr = v;\n            }\n            // Propagate the change in any case\n            this._onChangeCallback(v);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ;\n    CompleterCmp.prototype.ngAfterViewInit = function () {\n        if (this.autofocus) {\n            this._focus = true;\n        }\n    };\n    CompleterCmp.prototype.ngAfterViewChecked = function () {\n        var _this = this;\n        if (this._focus) {\n            setTimeout(function () {\n                _this.ctrInput.nativeElement.focus();\n                _this._focus = false;\n            }, 0);\n        }\n    };\n    CompleterCmp.prototype.onTouched = function () {\n        this._onTouchedCallback();\n    };\n    CompleterCmp.prototype.writeValue = function (value) {\n        this.searchStr = value;\n    };\n    CompleterCmp.prototype.registerOnChange = function (fn) {\n        this._onChangeCallback = fn;\n    };\n    CompleterCmp.prototype.registerOnTouched = function (fn) {\n        this._onTouchedCallback = fn;\n    };\n    CompleterCmp.prototype.setDisabledState = function (isDisabled) {\n        this.disableInput = isDisabled;\n    };\n    Object.defineProperty(CompleterCmp.prototype, \"datasource\", {\n        set: function (source) {\n            if (source) {\n                if (source instanceof Array) {\n                    this.dataService = this.completerService.local(source);\n                }\n                else if (typeof (source) === \"string\") {\n                    this.dataService = this.completerService.remote(source);\n                }\n                else {\n                    this.dataService = source;\n                }\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CompleterCmp.prototype, \"textNoResults\", {\n        set: function (text) {\n            if (this._textNoResults != text) {\n                this._textNoResults = text;\n                this.displayNoResults = !!this._textNoResults && this._textNoResults !== \"false\";\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CompleterCmp.prototype, \"textSearching\", {\n        set: function (text) {\n            if (this._textSearching != text) {\n                this._textSearching = text;\n                this.displaySearching = !!this._textSearching && this._textSearching !== \"false\";\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CompleterCmp.prototype.ngOnInit = function () {\n        var _this = this;\n        this.completer.selected.subscribe(function (item) {\n            _this.selected.emit(item);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            _this.highlighted.emit(item);\n        });\n        this.completer.opened.subscribe(function (isOpen) {\n            _this._open = isOpen;\n            _this.opened.emit(isOpen);\n        });\n    };\n    CompleterCmp.prototype.onBlur = function () {\n        this.blur.emit();\n        this.onTouched();\n        this.cdr.detectChanges();\n    };\n    CompleterCmp.prototype.onFocus = function () {\n        this.focusEvent.emit();\n        this.onTouched();\n    };\n    CompleterCmp.prototype.onKeyup = function (event) {\n        this.keyup.emit(event);\n    };\n    CompleterCmp.prototype.onKeydown = function (event) {\n        this.keydown.emit(event);\n    };\n    CompleterCmp.prototype.onChange = function (value) {\n        this.value = value;\n    };\n    CompleterCmp.prototype.open = function () {\n        this.completer.open();\n    };\n    CompleterCmp.prototype.close = function () {\n        this.completer.clear();\n    };\n    CompleterCmp.prototype.focus = function () {\n        if (this.ctrInput) {\n            this.ctrInput.nativeElement.focus();\n        }\n        else {\n            this._focus = true;\n        }\n    };\n    CompleterCmp.prototype.isOpen = function () {\n        return this._open;\n    };\n    return CompleterCmp;\n}());\nexport { CompleterCmp };\nCompleterCmp.decorators = [\n    { type: Component, args: [{\n                selector: \"ng2-completer\",\n                template: \"\\n        <div class=\\\"completer-holder\\\" ctrCompleter>\\n            <input #ctrInput [attr.id]=\\\"inputId.length > 0 ? inputId : null\\\" type=\\\"search\\\" class=\\\"completer-input\\\" ctrInput [ngClass]=\\\"inputClass\\\"\\n                [(ngModel)]=\\\"searchStr\\\" (ngModelChange)=\\\"onChange($event)\\\" [attr.name]=\\\"inputName\\\" [placeholder]=\\\"placeholder\\\"\\n                [attr.maxlength]=\\\"maxChars\\\" [tabindex]=\\\"fieldTabindex\\\" [disabled]=\\\"disableInput\\\"\\n                [clearSelected]=\\\"clearSelected\\\" [clearUnselected]=\\\"clearUnselected\\\"\\n                [overrideSuggested]=\\\"overrideSuggested\\\" [openOnFocus]=\\\"openOnFocus\\\" [fillHighlighted]=\\\"fillHighlighted\\\"\\n                [tokenSeparator]=\\\"tokenSeparator\\\"\\n                (blur)=\\\"onBlur()\\\" (focus)=\\\"onFocus()\\\" (keyup)=\\\"onKeyup($event)\\\" (keydown)=\\\"onKeydown($event)\\\"\\n                autocomplete=\\\"off\\\" autocorrect=\\\"off\\\" autocapitalize=\\\"off\\\" />\\n\\n            <div class=\\\"completer-dropdown-holder\\\"\\n                *ctrList=\\\"dataService;\\n                    minSearchLength: minSearchLength;\\n                    pause: pause;\\n                    autoMatch: autoMatch;\\n                    initialValue: initialValue;\\n                    autoHighlight: autoHighlight;\\n                    displaySearching: displaySearching;\\n                    let items = results;\\n                    let searchActive = searching;\\n                    let isInitialized = searchInitialized;\\n                    let isOpen = isOpen;\\\">\\n                <div class=\\\"completer-dropdown\\\" ctrDropdown *ngIf=\\\"isInitialized && isOpen && ((items.length > 0 || (displayNoResults && !searchActive)) || (searchActive && displaySearching))\\\">\\n                    <div *ngIf=\\\"searchActive && displaySearching\\\" class=\\\"completer-searching\\\">{{_textSearching}}</div>\\n                    <div *ngIf=\\\"!searchActive && (!items || items.length === 0)\\\" class=\\\"completer-no-results\\\">{{_textNoResults}}</div>\\n                    <div class=\\\"completer-row-wrapper\\\" *ngFor=\\\"let item of items; let rowIndex=index\\\">\\n                        <div class=\\\"completer-row\\\" [ctrRow]=\\\"rowIndex\\\" [dataItem]=\\\"item\\\">\\n                            <div *ngIf=\\\"item.image || item.image === ''\\\" class=\\\"completer-image-holder\\\">\\n                                <img *ngIf=\\\"item.image != ''\\\" src=\\\"{{item.image}}\\\" class=\\\"completer-image\\\" />\\n                                <div *ngIf=\\\"item.image === ''\\\" class=\\\"completer-image-default\\\"></div>\\n                            </div>\\n                            <div class=\\\"completer-item-text\\\" [ngClass]=\\\"{'completer-item-text-image': item.image || item.image === '' }\\\">\\n                                <completer-list-item class=\\\"completer-title\\\" [text]=\\\"item.title\\\" [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'title'\\\"></completer-list-item>\\n                                <completer-list-item *ngIf=\\\"item.description && item.description != ''\\\" class=\\\"completer-description\\\" [text]=\\\"item.description\\\"\\n                                    [matchClass]=\\\"matchClass\\\" [searchStr]=\\\"searchStr\\\" [type]=\\\"'description'\\\">\\n                                </completer-list-item>\\n                            </div>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    \",\n                styles: [\"\\n    .completer-dropdown {\\n        border-color: #ececec;\\n        border-width: 1px;\\n        border-style: solid;\\n        border-radius: 2px;\\n        width: 250px;\\n        padding: 6px;\\n        cursor: pointer;\\n        z-index: 9999;\\n        position: absolute;\\n        margin-top: -6px;\\n        background-color: #ffffff;\\n    }\\n\\n    .completer-row {\\n        padding: 5px;\\n        color: #000000;\\n        margin-bottom: 4px;\\n        clear: both;\\n        display: inline-block;\\n        width: 103%;\\n    }\\n\\n    .completer-selected-row {\\n        background-color: lightblue;\\n        color: #ffffff;\\n    }\\n\\n    .completer-description {\\n        font-size: 14px;\\n    }\\n\\n    .completer-image-default {\\n        width: 16px; \\n        height: 16px;\\n        background-image: url(\\\"demo/res/img/default.png\\\");\\n    }\\n\\n    .completer-image-holder {\\n        float: left;\\n        width: 10%;\\n    }\\n    .completer-item-text-image {\\n        float: right;\\n        width: 90%;\\n    }\\n    \"],\n                providers: [COMPLETER_CONTROL_VALUE_ACCESSOR]\n            },] },\n];\n/** @nocollapse */\nCompleterCmp.ctorParameters = function () { return [\n    { type: CompleterService, },\n    { type: ChangeDetectorRef, },\n]; };\nCompleterCmp.propDecorators = {\n    'dataService': [{ type: Input },],\n    'inputName': [{ type: Input },],\n    'inputId': [{ type: Input },],\n    'pause': [{ type: Input },],\n    'minSearchLength': [{ type: Input },],\n    'maxChars': [{ type: Input },],\n    'overrideSuggested': [{ type: Input },],\n    'clearSelected': [{ type: Input },],\n    'clearUnselected': [{ type: Input },],\n    'fillHighlighted': [{ type: Input },],\n    'placeholder': [{ type: Input },],\n    'matchClass': [{ type: Input },],\n    'fieldTabindex': [{ type: Input },],\n    'autoMatch': [{ type: Input },],\n    'disableInput': [{ type: Input },],\n    'inputClass': [{ type: Input },],\n    'autofocus': [{ type: Input },],\n    'openOnFocus': [{ type: Input },],\n    'initialValue': [{ type: Input },],\n    'autoHighlight': [{ type: Input },],\n    'tokenSeparator': [{ type: Input },],\n    'selected': [{ type: Output },],\n    'highlighted': [{ type: Output },],\n    'blur': [{ type: Output },],\n    'focusEvent': [{ type: Output, args: [\"focus\",] },],\n    'opened': [{ type: Output },],\n    'keyup': [{ type: Output },],\n    'keydown': [{ type: Output },],\n    'completer': [{ type: ViewChild, args: [CtrCompleter,] },],\n    'ctrInput': [{ type: ViewChild, args: [\"ctrInput\",] },],\n    'datasource': [{ type: Input },],\n    'textNoResults': [{ type: Input },],\n    'textSearching': [{ type: Input },],\n};\n//# sourceMappingURL=completer-cmp.js.map","\"use strict\";\nimport { Component, Input } from \"@angular/core\";\nvar CompleterListItemCmp = (function () {\n    function CompleterListItemCmp() {\n        this.parts = [];\n    }\n    CompleterListItemCmp.prototype.ngOnInit = function () {\n        if (!this.searchStr) {\n            this.parts.push({ isMatch: false, text: this.text });\n            return;\n        }\n        var matchStr = this.text.toLowerCase();\n        var matchPos = matchStr.indexOf(this.searchStr.toLowerCase());\n        var startIndex = 0;\n        while (matchPos >= 0) {\n            var matchText = this.text.slice(matchPos, matchPos + this.searchStr.length);\n            if (matchPos === 0) {\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length;\n            }\n            else if (matchPos > 0) {\n                var matchPart = this.text.slice(startIndex, matchPos);\n                this.parts.push({ isMatch: false, text: matchPart });\n                this.parts.push({ isMatch: true, text: matchText });\n                startIndex += this.searchStr.length + matchPart.length;\n            }\n            matchPos = matchStr.indexOf(this.searchStr.toLowerCase(), startIndex);\n        }\n        if (startIndex < this.text.length) {\n            this.parts.push({ isMatch: false, text: this.text.slice(startIndex, this.text.length) });\n        }\n    };\n    return CompleterListItemCmp;\n}());\nexport { CompleterListItemCmp };\nCompleterListItemCmp.decorators = [\n    { type: Component, args: [{\n                selector: \"completer-list-item\",\n                template: \"<span class=\\\"completer-list-item-holder\\\" [ngClass]=\\\"{'completer-title': type === 'title', 'completer-description': type === 'description'}\\\" >\\n        <span class=\\\"completer-list-item\\\" *ngFor=\\\"let part of parts\\\" [ngClass]=\\\"part.isMatch ? matchClass : null\\\">{{part.text}}</span>\\n    </span>\"\n            },] },\n];\n/** @nocollapse */\nCompleterListItemCmp.ctorParameters = function () { return []; };\nCompleterListItemCmp.propDecorators = {\n    'text': [{ type: Input },],\n    'searchStr': [{ type: Input },],\n    'matchClass': [{ type: Input },],\n    'type': [{ type: Input },],\n};\n//# sourceMappingURL=completer-list-item-cmp.js.map","import { Directive, ElementRef, Host, HostListener } from \"@angular/core\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { isNil } from \"../globals\";\nvar CtrRowItem = (function () {\n    function CtrRowItem(row, index) {\n        this.row = row;\n        this.index = index;\n    }\n    return CtrRowItem;\n}());\nexport { CtrRowItem };\nvar CtrDropdown = (function () {\n    function CtrDropdown(completer, el) {\n        this.completer = completer;\n        this.el = el;\n        this.rows = [];\n        this.completer.registerDropdown(this);\n    }\n    CtrDropdown.prototype.ngOnDestroy = function () {\n        this.completer.registerDropdown(null);\n    };\n    CtrDropdown.prototype.ngAfterViewInit = function () {\n        var _this = this;\n        var css = getComputedStyle(this.el.nativeElement);\n        var autoHighlightIndex = this.completer.autoHighlightIndex;\n        this.isScrollOn = !!css.maxHeight && css.overflowY === \"auto\";\n        if (autoHighlightIndex) {\n            setTimeout(function () {\n                _this.highlightRow(autoHighlightIndex);\n            }, 0);\n        }\n    };\n    CtrDropdown.prototype.onMouseDown = function (event) {\n        var _this = this;\n        // Support for canceling blur on IE (issue #158)\n        this.completer.cancelBlur(true);\n        setTimeout(function () {\n            _this.completer.cancelBlur(false);\n        }, 0);\n    };\n    CtrDropdown.prototype.registerRow = function (row) {\n        var arrIndex = this.rows.findIndex(function (_row) { return _row.index === row.index; });\n        if (arrIndex >= 0) {\n            this.rows[arrIndex] = row;\n        }\n        else {\n            this.rows.push(row);\n        }\n    };\n    CtrDropdown.prototype.unregisterRow = function (rowIndex) {\n        var arrIndex = this.rows.findIndex(function (_row) { return _row.index === rowIndex; });\n        this.rows.splice(arrIndex, 1);\n        if (this.currHighlighted && rowIndex === this.currHighlighted.index) {\n            this.highlightRow(null);\n        }\n    };\n    CtrDropdown.prototype.highlightRow = function (index) {\n        var highlighted = this.rows.find(function (row) { return row.index === index; });\n        if (isNil(index) || index < 0) {\n            if (this.currHighlighted) {\n                this.currHighlighted.row.setHighlighted(false);\n            }\n            this.currHighlighted = undefined;\n            this.completer.onHighlighted(null);\n            return;\n        }\n        if (!highlighted) {\n            return;\n        }\n        if (this.currHighlighted) {\n            this.currHighlighted.row.setHighlighted(false);\n        }\n        this.currHighlighted = highlighted;\n        this.currHighlighted.row.setHighlighted(true);\n        this.completer.onHighlighted(this.currHighlighted.row.getDataItem());\n        if (this.isScrollOn && this.currHighlighted) {\n            var rowTop = this.dropdownRowTop();\n            if (!rowTop) {\n                return;\n            }\n            if (rowTop < 0) {\n                this.dropdownScrollTopTo(rowTop - 1);\n            }\n            else {\n                var row = this.currHighlighted.row.getNativeElement();\n                if (this.dropdownHeight() < row.getBoundingClientRect().bottom) {\n                    this.dropdownScrollTopTo(this.dropdownRowOffsetHeight(row));\n                    if (this.el.nativeElement.getBoundingClientRect().bottom - this.dropdownRowOffsetHeight(row) < row.getBoundingClientRect().top) {\n                        this.dropdownScrollTopTo(row.getBoundingClientRect().top - (this.el.nativeElement.getBoundingClientRect().top + parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10)));\n                    }\n                }\n            }\n        }\n    };\n    CtrDropdown.prototype.clear = function () {\n        this.rows = [];\n    };\n    CtrDropdown.prototype.onSelected = function (item) {\n        this.completer.onSelected(item);\n    };\n    CtrDropdown.prototype.selectCurrent = function () {\n        if (this.currHighlighted) {\n            this.onSelected(this.currHighlighted.row.getDataItem());\n        }\n        else if (this.rows.length > 0) {\n            this.onSelected(this.rows[0].row.getDataItem());\n        }\n    };\n    CtrDropdown.prototype.nextRow = function () {\n        var nextRowIndex = 0;\n        if (this.currHighlighted) {\n            nextRowIndex = this.currHighlighted.index + 1;\n        }\n        this.highlightRow(nextRowIndex);\n    };\n    CtrDropdown.prototype.prevRow = function () {\n        var nextRowIndex = -1;\n        if (this.currHighlighted) {\n            nextRowIndex = this.currHighlighted.index - 1;\n        }\n        this.highlightRow(nextRowIndex);\n    };\n    CtrDropdown.prototype.dropdownScrollTopTo = function (offset) {\n        this.el.nativeElement.scrollTop = this.el.nativeElement.scrollTop + offset;\n    };\n    CtrDropdown.prototype.dropdownRowTop = function () {\n        if (!this.currHighlighted) {\n            return;\n        }\n        return this.currHighlighted.row.getNativeElement().getBoundingClientRect().top -\n            (this.el.nativeElement.getBoundingClientRect().top +\n                parseInt(getComputedStyle(this.el.nativeElement).paddingTop, 10));\n    };\n    CtrDropdown.prototype.dropdownHeight = function () {\n        return this.el.nativeElement.getBoundingClientRect().top +\n            parseInt(getComputedStyle(this.el.nativeElement).maxHeight, 10);\n    };\n    CtrDropdown.prototype.dropdownRowOffsetHeight = function (row) {\n        var css = getComputedStyle(row.parentElement);\n        return row.parentElement.offsetHeight +\n            parseInt(css.marginTop, 10) + parseInt(css.marginBottom, 10);\n    };\n    return CtrDropdown;\n}());\nexport { CtrDropdown };\nCtrDropdown.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrDropdown]\",\n            },] },\n];\n/** @nocollapse */\nCtrDropdown.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: ElementRef, },\n]; };\nCtrDropdown.propDecorators = {\n    'onMouseDown': [{ type: HostListener, args: [\"mousedown\", [\"$event\"],] },],\n};\n//# sourceMappingURL=ctr-dropdown.js.map","import { Directive, ElementRef, EventEmitter, Host, HostListener, Input, Output } from \"@angular/core\";\nimport { NgModel } from \"@angular/forms\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { isNil } from \"../globals\";\n// keyboard events\nvar KEY_DW = 40;\nvar KEY_RT = 39;\nvar KEY_UP = 38;\nvar KEY_LF = 37;\nvar KEY_ES = 27;\nvar KEY_EN = 13;\nvar KEY_TAB = 9;\nvar CtrInput = (function () {\n    function CtrInput(completer, ngModel, el) {\n        var _this = this;\n        this.completer = completer;\n        this.ngModel = ngModel;\n        this.el = el;\n        this.clearSelected = false;\n        this.clearUnselected = false;\n        this.overrideSuggested = false;\n        this.fillHighlighted = true;\n        this.openOnFocus = false;\n        this.tokenSeparator = '';\n        this.ngModelChange = new EventEmitter();\n        this._searchStr = \"\";\n        this._displayStr = \"\";\n        this.blurTimer = null;\n        var getValueFromItem = function (item) {\n            if (!item) {\n                return '';\n            }\n            if (_this.tokenSeparator) {\n                var tokens = _this.searchStr.split(_this.tokenSeparator);\n                tokens[tokens.length - 1] = item.title;\n                return tokens.join(_this.tokenSeparator);\n            }\n            else {\n                return item.title;\n            }\n        };\n        this.completer.selected.subscribe(function (item) {\n            if (!item) {\n                return;\n            }\n            if (_this.clearSelected) {\n                _this.searchStr = \"\";\n            }\n            else {\n                _this.searchStr = getValueFromItem(item);\n            }\n            _this.ngModelChange.emit(_this.searchStr);\n        });\n        this.completer.highlighted.subscribe(function (item) {\n            if (_this.fillHighlighted) {\n                if (item) {\n                    _this._displayStr = getValueFromItem(item);\n                }\n                else {\n                    _this._displayStr = _this.searchStr;\n                }\n                _this.ngModelChange.emit(_this._displayStr);\n            }\n        });\n        if (this.ngModel.valueChanges) {\n            this.ngModel.valueChanges.subscribe(function (value) {\n                if (!isNil(value) && _this._displayStr !== value) {\n                    _this.search(value);\n                }\n            });\n        }\n    }\n    CtrInput.prototype.search = function (value) {\n        this.searchStr = value;\n        if (value && this.tokenSeparator) {\n            var tokens = value.split(this.tokenSeparator);\n            value = tokens[tokens.length - 1];\n        }\n        this.completer.search(value);\n    };\n    CtrInput.prototype.keyupHandler = function (event) {\n        if (event.keyCode === KEY_LF || event.keyCode === KEY_RT || event.keyCode === KEY_TAB) {\n            // do nothing\n            return;\n        }\n        if (event.keyCode === KEY_UP || event.keyCode === KEY_EN) {\n            event.preventDefault();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.search(this.searchStr);\n        }\n        else if (event.keyCode === KEY_ES) {\n            if (this.completer.isOpen) {\n                this.restoreSearchValue();\n                this.completer.clear();\n                event.stopPropagation();\n                event.preventDefault();\n            }\n        }\n    };\n    CtrInput.prototype.keypressHandler = function (event) {\n        this.completer.open();\n    };\n    CtrInput.prototype.keydownHandler = function (event) {\n        if (event.keyCode === KEY_EN) {\n            if (this.completer.hasHighlighted()) {\n                event.preventDefault();\n            }\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_DW) {\n            event.preventDefault();\n            this.completer.open();\n            this.completer.nextRow();\n        }\n        else if (event.keyCode === KEY_UP) {\n            event.preventDefault();\n            this.completer.prevRow();\n        }\n        else if (event.keyCode === KEY_TAB) {\n            this.handleSelection();\n        }\n        else if (event.keyCode === KEY_ES) {\n            // This is very specific to IE10/11 #272\n            // without this, IE clears the input text\n            event.preventDefault();\n            if (this.completer.isOpen) {\n                event.stopPropagation();\n            }\n        }\n    };\n    CtrInput.prototype.onBlur = function (event) {\n        var _this = this;\n        // Check if we need to cancel Blur for IE\n        if (this.completer.isCancelBlur()) {\n            setTimeout(function () {\n                // get the focus back\n                _this.el.nativeElement.focus();\n            }, 0);\n            return;\n        }\n        if (this.completer.isOpen) {\n            this.blurTimer = Observable.timer(200).subscribe(function () { return _this.doBlur(); });\n        }\n    };\n    CtrInput.prototype.onfocus = function () {\n        if (this.blurTimer) {\n            this.blurTimer.unsubscribe();\n            this.blurTimer = null;\n        }\n        if (this.openOnFocus) {\n            this.completer.open();\n        }\n    };\n    Object.defineProperty(CtrInput.prototype, \"searchStr\", {\n        get: function () {\n            return this._searchStr;\n        },\n        set: function (term) {\n            this._searchStr = term;\n            this._displayStr = term;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrInput.prototype.handleSelection = function () {\n        if (this.completer.hasHighlighted()) {\n            this.completer.selectCurrent();\n        }\n        else if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else {\n            this.completer.clear();\n        }\n    };\n    CtrInput.prototype.restoreSearchValue = function () {\n        if (this.fillHighlighted) {\n            if (this._displayStr != this.searchStr) {\n                this._displayStr = this.searchStr;\n                this.ngModelChange.emit(this.searchStr);\n            }\n        }\n    };\n    CtrInput.prototype.doBlur = function () {\n        if (this.blurTimer) {\n            this.blurTimer.unsubscribe();\n            this.blurTimer = null;\n        }\n        if (this.overrideSuggested) {\n            this.completer.onSelected({ title: this.searchStr, originalObject: null });\n        }\n        else {\n            if (this.clearUnselected && !this.completer.hasSelected) {\n                this.searchStr = \"\";\n                this.ngModelChange.emit(this.searchStr);\n            }\n            else {\n                this.restoreSearchValue();\n            }\n        }\n        this.completer.clear();\n    };\n    return CtrInput;\n}());\nexport { CtrInput };\nCtrInput.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrInput]\",\n            },] },\n];\n/** @nocollapse */\nCtrInput.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: NgModel, },\n    { type: ElementRef, },\n]; };\nCtrInput.propDecorators = {\n    'clearSelected': [{ type: Input, args: [\"clearSelected\",] },],\n    'clearUnselected': [{ type: Input, args: [\"clearUnselected\",] },],\n    'overrideSuggested': [{ type: Input, args: [\"overrideSuggested\",] },],\n    'fillHighlighted': [{ type: Input, args: [\"fillHighlighted\",] },],\n    'openOnFocus': [{ type: Input, args: [\"openOnFocus\",] },],\n    'tokenSeparator': [{ type: Input, args: [\"tokenSeparator\",] },],\n    'ngModelChange': [{ type: Output },],\n    'keyupHandler': [{ type: HostListener, args: [\"keyup\", [\"$event\"],] },],\n    'keypressHandler': [{ type: HostListener, args: [\"keypress\", [\"$event\"],] },],\n    'keydownHandler': [{ type: HostListener, args: [\"keydown\", [\"$event\"],] },],\n    'onBlur': [{ type: HostListener, args: [\"blur\", [\"$event\"],] },],\n    'onfocus': [{ type: HostListener, args: [\"focus\", [],] },],\n};\n//# sourceMappingURL=ctr-input.js.map","import \"rxjs/add/observable/timer\";\nimport { ChangeDetectorRef, Directive, Host, Input, TemplateRef, ViewContainerRef } from \"@angular/core\";\nimport { Observable } from \"rxjs/Observable\";\nimport { CtrCompleter } from \"./ctr-completer\";\nimport { MIN_SEARCH_LENGTH, PAUSE, CLEAR_TIMEOUT, isNil } from \"../globals\";\nvar CtrListContext = (function () {\n    function CtrListContext(results, searching, searchInitialized, isOpen) {\n        this.results = results;\n        this.searching = searching;\n        this.searchInitialized = searchInitialized;\n        this.isOpen = isOpen;\n    }\n    return CtrListContext;\n}());\nexport { CtrListContext };\nvar CtrList = (function () {\n    function CtrList(completer, templateRef, viewContainer, cd) {\n        this.completer = completer;\n        this.templateRef = templateRef;\n        this.viewContainer = viewContainer;\n        this.cd = cd;\n        this.ctrListMinSearchLength = MIN_SEARCH_LENGTH;\n        this.ctrListPause = PAUSE;\n        this.ctrListAutoMatch = false;\n        this.ctrListAutoHighlight = false;\n        this.ctrListDisplaySearching = true;\n        // private results: CompleterItem[] = [];\n        this.term = null;\n        // private searching = false;\n        this.searchTimer = null;\n        this.clearTimer = null;\n        this.ctx = new CtrListContext([], false, false, false);\n        this._initialValue = null;\n        this.viewRef = null;\n    }\n    CtrList.prototype.ngOnInit = function () {\n        this.completer.registerList(this);\n        this.viewRef = this.viewContainer.createEmbeddedView(this.templateRef, new CtrListContext([], false, false, false));\n    };\n    Object.defineProperty(CtrList.prototype, \"dataService\", {\n        set: function (newService) {\n            var _this = this;\n            this._dataService = newService;\n            if (this._dataService) {\n                this._dataService\n                    .catch(function (err) { return _this.handleError(err); })\n                    .subscribe(function (results) {\n                    _this.ctx.searchInitialized = true;\n                    _this.ctx.searching = false;\n                    _this.ctx.results = results;\n                    if (_this.ctrListAutoMatch && results.length === 1 && results[0].title && !isNil(_this.term) &&\n                        results[0].title.toLocaleLowerCase() === _this.term.toLocaleLowerCase()) {\n                        // Do automatch\n                        _this.completer.onSelected(results[0]);\n                        return;\n                    }\n                    if (_this._initialValue) {\n                        _this.initialValue = _this._initialValue;\n                        _this._initialValue = null;\n                    }\n                    _this.refreshTemplate();\n                    if (_this.ctrListAutoHighlight) {\n                        _this.completer.autoHighlightIndex = _this.getBestMatchIndex();\n                    }\n                });\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrList.prototype, \"initialValue\", {\n        set: function (value) {\n            var _this = this;\n            if (this._dataService && typeof this._dataService.convertToItem === \"function\") {\n                setTimeout(function () {\n                    var initialItem = _this._dataService.convertToItem(value);\n                    if (initialItem) {\n                        _this.completer.onSelected(initialItem, false);\n                    }\n                });\n            }\n            else if (!this._dataService) {\n                this._initialValue = value;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrList.prototype.search = function (term) {\n        var _this = this;\n        if (!isNil(term) && term.length >= this.ctrListMinSearchLength && this.term !== term) {\n            if (this.searchTimer) {\n                this.searchTimer.unsubscribe();\n                this.searchTimer = null;\n            }\n            if (!this.ctx.searching) {\n                if (this.ctrListDisplaySearching) {\n                    this.ctx.results = [];\n                }\n                this.ctx.searching = true;\n                this.ctx.searchInitialized = true;\n                this.refreshTemplate();\n            }\n            if (this.clearTimer) {\n                this.clearTimer.unsubscribe();\n            }\n            this.searchTimer = Observable.timer(this.ctrListPause).subscribe(function () {\n                _this.searchTimerComplete(term);\n            });\n        }\n        else if (!isNil(term) && term.length < this.ctrListMinSearchLength) {\n            this.clear();\n            this.term = \"\";\n        }\n    };\n    CtrList.prototype.clear = function () {\n        var _this = this;\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n        }\n        this.clearTimer = Observable.timer(CLEAR_TIMEOUT).subscribe(function () {\n            _this._clear();\n        });\n    };\n    CtrList.prototype.open = function () {\n        if (!this.ctx.searchInitialized) {\n            this.search(\"\");\n        }\n        this.refreshTemplate();\n    };\n    CtrList.prototype.isOpen = function (open) {\n        this.ctx.isOpen = open;\n    };\n    CtrList.prototype._clear = function () {\n        if (this.searchTimer) {\n            this.searchTimer.unsubscribe();\n            this.searchTimer = null;\n        }\n        if (this.dataService) {\n            this.dataService.cancel();\n        }\n        this.viewContainer.clear();\n        this.viewRef = null;\n    };\n    CtrList.prototype.searchTimerComplete = function (term) {\n        // Begin the search\n        if (isNil(term) || term.length < this.ctrListMinSearchLength) {\n            this.ctx.searching = false;\n            return;\n        }\n        this.term = term;\n        this._dataService.search(term);\n    };\n    CtrList.prototype.handleError = function (error) {\n        this.ctx.searching = false;\n        var errMsg = \"search error\";\n        if (error) {\n            errMsg = (error.message) ? error.message :\n                error.status ? error.status + \" - \" + error.statusText : \"Server error\";\n        }\n        if (console && console.error) {\n            console.error(errMsg); // log to console\n        }\n        this.refreshTemplate();\n        return Observable.throw(errMsg);\n    };\n    CtrList.prototype.refreshTemplate = function () {\n        // create the template if it doesn't exist\n        if (!this.viewRef) {\n            this.viewRef = this.viewContainer.createEmbeddedView(this.templateRef, this.ctx);\n        }\n        else {\n            // refresh the template\n            this.viewRef.context.isOpen = this.ctx.isOpen;\n            this.viewRef.context.results = this.ctx.results;\n            this.viewRef.context.searching = this.ctx.searching;\n            this.viewRef.context.searchInitialized = this.ctx.searchInitialized;\n            this.viewRef.detectChanges();\n        }\n        this.cd.markForCheck();\n    };\n    CtrList.prototype.getBestMatchIndex = function () {\n        var _this = this;\n        if (!this.ctx.results || !this.term) {\n            return null;\n        }\n        // First try to find the exact term\n        var bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase() === _this.term.toLocaleLowerCase(); });\n        // If not try to find the first item that starts with the term\n        if (bestMatch < 0) {\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().startsWith(_this.term.toLocaleLowerCase()); });\n        }\n        // If not try to find the first item that includes the term\n        if (bestMatch < 0) {\n            bestMatch = this.ctx.results.findIndex(function (item) { return item.title.toLowerCase().includes(_this.term.toLocaleLowerCase()); });\n        }\n        return bestMatch < 0 ? null : bestMatch;\n    };\n    return CtrList;\n}());\nexport { CtrList };\nCtrList.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrList]\",\n            },] },\n];\n/** @nocollapse */\nCtrList.ctorParameters = function () { return [\n    { type: CtrCompleter, decorators: [{ type: Host },] },\n    { type: TemplateRef, },\n    { type: ViewContainerRef, },\n    { type: ChangeDetectorRef, },\n]; };\nCtrList.propDecorators = {\n    'ctrListMinSearchLength': [{ type: Input },],\n    'ctrListPause': [{ type: Input },],\n    'ctrListAutoMatch': [{ type: Input },],\n    'ctrListAutoHighlight': [{ type: Input },],\n    'ctrListDisplaySearching': [{ type: Input },],\n    'dataService': [{ type: Input, args: [\"ctrList\",] },],\n    'initialValue': [{ type: Input, args: [\"ctrListInitialValue\",] },],\n};\n//# sourceMappingURL=ctr-list.js.map","import { Directive, ElementRef, Host, HostListener, Input, Renderer } from \"@angular/core\";\nimport { CtrDropdown, CtrRowItem } from \"./ctr-dropdown\";\nvar CtrRow = (function () {\n    function CtrRow(el, renderer, dropdown) {\n        this.el = el;\n        this.renderer = renderer;\n        this.dropdown = dropdown;\n        this.selected = false;\n    }\n    CtrRow.prototype.ngOnDestroy = function () {\n        if (this._rowIndex) {\n            this.dropdown.unregisterRow(this._rowIndex);\n        }\n    };\n    Object.defineProperty(CtrRow.prototype, \"ctrRow\", {\n        set: function (index) {\n            this._rowIndex = index;\n            this.dropdown.registerRow(new CtrRowItem(this, this._rowIndex));\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CtrRow.prototype, \"dataItem\", {\n        set: function (item) {\n            this._item = item;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CtrRow.prototype.onClick = function (event) {\n        this.dropdown.onSelected(this._item);\n    };\n    CtrRow.prototype.onMouseEnter = function (event) {\n        this.dropdown.highlightRow(this._rowIndex);\n    };\n    CtrRow.prototype.setHighlighted = function (selected) {\n        this.selected = selected;\n        this.renderer.setElementClass(this.el.nativeElement, \"completer-selected-row\", this.selected);\n    };\n    CtrRow.prototype.getNativeElement = function () {\n        return this.el.nativeElement;\n    };\n    CtrRow.prototype.getDataItem = function () {\n        return this._item;\n    };\n    return CtrRow;\n}());\nexport { CtrRow };\nCtrRow.decorators = [\n    { type: Directive, args: [{\n                selector: \"[ctrRow]\",\n            },] },\n];\n/** @nocollapse */\nCtrRow.ctorParameters = function () { return [\n    { type: ElementRef, },\n    { type: Renderer, },\n    { type: CtrDropdown, decorators: [{ type: Host },] },\n]; };\nCtrRow.propDecorators = {\n    'ctrRow': [{ type: Input },],\n    'dataItem': [{ type: Input },],\n    'onClick': [{ type: HostListener, args: [\"click\", [\"$event\"],] },],\n    'onMouseEnter': [{ type: HostListener, args: [\"mouseenter\", [\"$event\"],] },],\n};\n//# sourceMappingURL=ctr-row.js.map","import { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { HttpModule } from \"@angular/http\";\nimport { CompleterCmp } from \"./components/completer-cmp\";\nimport { CompleterListItemCmp } from \"./components/completer-list-item-cmp\";\nimport { CompleterService } from \"./services/completer-service\";\nimport { LocalDataFactoryProvider, RemoteDataFactoryProvider } from \"./services/completer-data-factory\";\nimport { CtrCompleter } from \"./directives/ctr-completer\";\nimport { CtrDropdown } from \"./directives/ctr-dropdown\";\nimport { CtrInput } from \"./directives/ctr-input\";\nimport { CtrList } from \"./directives/ctr-list\";\nimport { CtrRow } from \"./directives/ctr-row\";\nimport { CommonModule } from \"@angular/common\";\nvar Ng2CompleterModule = (function () {\n    function Ng2CompleterModule() {\n    }\n    return Ng2CompleterModule;\n}());\nexport { Ng2CompleterModule };\nNg2CompleterModule.decorators = [\n    { type: NgModule, args: [{\n                imports: [\n                    CommonModule,\n                    FormsModule,\n                    HttpModule\n                ],\n                declarations: [\n                    CompleterListItemCmp,\n                    CtrCompleter,\n                    CtrDropdown,\n                    CtrInput,\n                    CtrList,\n                    CtrRow,\n                    CompleterCmp\n                ],\n                exports: [\n                    CompleterCmp,\n                    CompleterListItemCmp,\n                    CtrCompleter,\n                    CtrDropdown,\n                    CtrInput,\n                    CtrList,\n                    CtrRow\n                ],\n                providers: [\n                    CompleterService,\n                    LocalDataFactoryProvider,\n                    RemoteDataFactoryProvider\n                ]\n            },] },\n];\n/** @nocollapse */\nNg2CompleterModule.ctorParameters = function () { return []; };\n//# sourceMappingURL=ng2-completer.module.js.map"],"names":["isNil","value","localDataFactory","LocalData","remoteDataFactory","http","RemoteData","CtrCompleter","this","selected","EventEmitter","highlighted","opened","_hasHighlighted","_hasSelected","_cancelBlur","_isOpen","prototype","registerList","list","registerDropdown","dropdown","onHighlighted","item","emit","onSelected","clearList","clear","search","term","isOpen","selectCurrent","nextRow","prevRow","hasHighlighted","cancelBlur","cancel","isCancelBlur","open","Object","defineProperty","get","set","enumerable","configurable","_autoHighlightIndex","index","highlightRow","decorators","type","Directive","args","selector","ctorParameters","propDecorators","Output","MAX_CHARS","MIN_SEARCH_LENGTH","PAUSE","TEXT_SEARCHING","TEXT_NO_RESULTS","__extends","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","create","CompleterBaseData","_super","call","searchFields","_searchFields","titleField","_titleField","descriptionField","_descriptionField","imageField","_imageField","convertToItem","data","formattedText","image","formattedDesc","extractTitle","extractValue","title","description","originalObject","extractMatches","_this","split","undefined","filter","map","searchField","some","toString","toLowerCase","indexOf","field","reduce","acc","titlePart","obj","key","keys","result","i","length","processResults","matches","results","push","Subject","Observable","subscribe","res","_data","savedTerm","next","Injectable","_urlFormater","_dataField","remoteUrl","_remoteUrl","urlFormater","dataField","headers","_headers","requestOptions","_requestOptions","url","encodeURIComponent","RequestOptions","Headers","remoteSearch","merge","json","catch","err","error","of","unsubscribe","CompleterService","local","remote","Inject","noop","COMPLETER_CONTROL_VALUE_ACCESSOR","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","CompleterCmp","multi","completerService","cdr","inputName","inputId","pause","minSearchLength","maxChars","overrideSuggested","clearSelected","clearUnselected","fillHighlighted","placeholder","autoMatch","disableInput","autofocus","openOnFocus","autoHighlight","tokenSeparator","blur","focusEvent","keyup","keydown","searchStr","control","FormControl","displaySearching","displayNoResults","_onTouchedCallback","_onChangeCallback","_focus","_open","_textNoResults","_textSearching","v","ngAfterViewInit","ngAfterViewChecked","setTimeout","ctrInput","nativeElement","focus","onTouched","writeValue","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","source","dataService","text","ngOnInit","completer","onBlur","detectChanges","onFocus","onKeyup","event","onKeydown","onChange","close","Component","template","styles","providers","ChangeDetectorRef","Input","matchClass","fieldTabindex","inputClass","initialValue","ViewChild","datasource","textNoResults","textSearching","CompleterListItemCmp","parts","isMatch","matchStr","matchPos","startIndex","matchText","slice","matchPart","LocalDataFactoryProvider","useFactory","RemoteDataFactoryProvider","deps","Http","CtrRowItem","row","CtrDropdown","el","rows","ngOnDestroy","css","getComputedStyle","autoHighlightIndex","isScrollOn","maxHeight","overflowY","onMouseDown","registerRow","arrIndex","findIndex","_row","unregisterRow","rowIndex","splice","currHighlighted","find","setHighlighted","getDataItem","rowTop","dropdownRowTop","dropdownScrollTopTo","getNativeElement","dropdownHeight","getBoundingClientRect","bottom","dropdownRowOffsetHeight","top","parseInt","paddingTop","nextRowIndex","offset","scrollTop","parentElement","offsetHeight","marginTop","marginBottom","Host","ElementRef","HostListener","CtrInput","ngModel","ngModelChange","_searchStr","_displayStr","blurTimer","getValueFromItem","tokens","join","valueChanges","keyupHandler","keyCode","preventDefault","restoreSearchValue","stopPropagation","keypressHandler","keydownHandler","handleSelection","timer","doBlur","onfocus","hasSelected","NgModel","CtrListContext","searching","searchInitialized","CtrList","templateRef","viewContainer","cd","ctrListMinSearchLength","ctrListPause","ctrListAutoMatch","ctrListAutoHighlight","ctrListDisplaySearching","searchTimer","clearTimer","ctx","_initialValue","viewRef","createEmbeddedView","newService","_dataService","handleError","toLocaleLowerCase","refreshTemplate","getBestMatchIndex","initialItem","searchTimerComplete","_clear","errMsg","message","status","statusText","console","throw","context","markForCheck","bestMatch","startsWith","includes","TemplateRef","ViewContainerRef","CtrRow","renderer","_rowIndex","_item","onClick","onMouseEnter","setElementClass","Renderer","ctrRow","dataItem","Ng2CompleterModule","NgModule","imports","CommonModule","FormsModule","HttpModule","declarations","exports"],"mappings":"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"}